<!-- Project Header -->
<section class="project-header">
  <div class="container">
    <a routerLink="/home" class="back-link">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
        <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
      </svg>
      Back to Home
    </a>
    <h1 class="project-title">Todo Application</h1>
    <p class="project-description">
      A full-featured task management app built with Angular Signals, demonstrating
      modern reactive state management, local storage persistence, and clean UI design.
    </p>
    <div class="project-tags">
      <span class="tag">Angular 20.3</span>
      <span class="tag">TypeScript</span>
      <span class="tag">Signals</span>
      <span class="tag">LocalStorage</span>
    </div>
  </div>
</section>

<!-- Todo App Interface -->
<section class="todo-interface">
  <div class="container">
    <div class="todo-app-container">
      <!-- Stats Summary -->
      <div class="stats-bar">
        <div class="stat">
          <span class="stat-label">Total</span>
          <span class="stat-value">{{ todos().length }}</span>
        </div>
        <div class="stat">
          <span class="stat-label">Active</span>
          <span class="stat-value">{{ activeTodosCount() }}</span>
        </div>
        <div class="stat">
          <span class="stat-label">Completed</span>
          <span class="stat-value">{{ completedTodosCount() }}</span>
        </div>
      </div>

      <!-- Add Todo Form -->
      <div class="add-todo-section">
        <input
          type="text"
          class="todo-input"
          placeholder="What needs to be done?"
          [value]="newTodoText()"
          (input)="updateNewTodoText($event)"
          (keyup.enter)="addTodo()"
        />
        <button class="btn btn-add" (click)="addTodo()" [disabled]="!newTodoText().trim()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/>
          </svg>
          Add Task
        </button>
      </div>

      <!-- Filter Tabs -->
      <div class="filter-tabs">
        <button
          class="filter-tab"
          [class.active]="currentFilter() === 'all'"
          (click)="setFilter('all')"
        >
          All Tasks
        </button>
        <button
          class="filter-tab"
          [class.active]="currentFilter() === 'active'"
          (click)="setFilter('active')"
        >
          Active
        </button>
        <button
          class="filter-tab"
          [class.active]="currentFilter() === 'completed'"
          (click)="setFilter('completed')"
        >
          Completed
        </button>
      </div>

      <!-- Todo List -->
      <div class="todo-list">
        @if (filteredTodos().length === 0) {
          <div class="empty-state">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
            </svg>
            <p class="empty-message">
              @if (currentFilter() === 'all') {
                No tasks yet. Add one above to get started!
              } @else if (currentFilter() === 'active') {
                No active tasks. Great job!
              } @else {
                No completed tasks yet.
              }
            </p>
          </div>
        } @else {
          @for (todo of filteredTodos(); track todo.id) {
            <div class="todo-item" [class.completed]="todo.completed" [class.editing]="editingTodoId() === todo.id">
              <div class="todo-content">
                <input
                  type="checkbox"
                  class="todo-checkbox"
                  [checked]="todo.completed"
                  (change)="toggleTodo(todo.id)"
                  [id]="'todo-' + todo.id"
                />
                <label [for]="'todo-' + todo.id" class="checkbox-label"></label>

                @if (editingTodoId() === todo.id) {
                  <input
                    type="text"
                    class="todo-edit-input"
                    [value]="editingText()"
                    (input)="updateEditingText($event)"
                    (keyup.enter)="saveEdit(todo.id)"
                    (keyup.escape)="cancelEdit()"
                    (blur)="saveEdit(todo.id)"
                  />
                } @else {
                  <span class="todo-text" (dblclick)="startEdit(todo)">{{ todo.text }}</span>
                }

                <span class="todo-timestamp">{{ formatTimestamp(todo.createdAt) }}</span>
              </div>

              <div class="todo-actions">
                @if (editingTodoId() !== todo.id) {
                  <button class="btn-icon" (click)="startEdit(todo)" title="Edit">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                    </svg>
                  </button>
                }
                <button class="btn-icon btn-delete" (click)="deleteTodo(todo.id)" title="Delete">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                  </svg>
                </button>
              </div>
            </div>
          }
        }
      </div>

      <!-- Actions Footer -->
      @if (todos().length > 0) {
        <div class="actions-footer">
          <button class="btn btn-secondary" (click)="clearCompleted()" [disabled]="completedTodosCount() === 0">
            Clear Completed
          </button>
        </div>
      }
    </div>
  </div>
</section>

<!-- Features Section -->
<section class="features-section">
  <div class="container">
    <h2 class="section-title">Key Features</h2>
    <div class="features-grid">
      @for (feature of features(); track feature.title) {
        <div class="feature-card">
          <div class="feature-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
            </svg>
          </div>
          <h3 class="feature-title">{{ feature.title }}</h3>
          <p class="feature-description">{{ feature.description }}</p>
        </div>
      }
    </div>
  </div>
</section>
